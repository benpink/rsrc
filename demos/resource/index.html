<!DOCTYPE html><html><head><meta charSet="utf-8" class="next-head"/><title class="next-head">rsrc - simply fetching</title><meta name="viewport" content="initial-scale=1.0,user-scalable=no,maximum-scale=1,width=device-width" class="next-head"/><link rel="stylesheet" href="/static/styles.css" class="next-head"/><link rel="preload" href="/rsrc/_next/static/HinAC7FyyY6p9tQ2syZeR/pages/demos/resource.js" as="script"/><link rel="preload" href="/rsrc/_next/static/HinAC7FyyY6p9tQ2syZeR/pages/_app.js" as="script"/><link rel="preload" href="/rsrc/_next/static/HinAC7FyyY6p9tQ2syZeR/pages/_error.js" as="script"/><link rel="preload" href="/rsrc/_next/static/runtime/webpack-42652fa8b82c329c0559.js" as="script"/><link rel="preload" href="/rsrc/_next/static/chunks/commons.d32c58893f404c7c451c.js" as="script"/><link rel="preload" href="/rsrc/_next/static/runtime/main-b9b53f3f44c8c7c1cf78.js" as="script"/></head><body><div id="__next"><header><nav><ul style="flex:3;justify-content:flex-start"><li class="logo"><a href="/rsrc/"><code>rsrc</code><small>Dead simple fetch management for React.</small></a></li></ul><ul style="flex:1;justify-content:flex-end"><li><a href="https://github.com/signalsciences/rsrc/"><img alt="Github" width="18" src="/static/github.svg"/></a></li></ul></nav><nav><ul><li><a href="/rsrc/guides/">Getting Started</a></li><li><a href="/rsrc/api/">API Reference</a></li><li><a href="/rsrc/demos/">Demos &amp; Playground</a></li></ul></nav></header><main><header><h2>Resource</h2><small>Modify the code below to try it out</small></header><div><div class="react-live"><pre class="prism-code" spellcheck="false" contenteditable="true"><span class="token keyword">const</span> path <span class="token operator">=</span> <span class="token string">'https://jsonplaceholder.typicode.com/todos/{id}'</span>

<span class="token keyword">const</span> Todos <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> params<span class="token punctuation">,</span> query<span class="token punctuation">,</span> <span class="token operator">...</span>rest <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Resource</span>
    <span class="token attr-name">path</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span> path <span class="token punctuation">}</span></span>
    <span class="token attr-name">params</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span> params <span class="token punctuation">}</span></span>
    <span class="token attr-name">query</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span> query <span class="token punctuation">}</span></span>
    <span class="token attr-name">maxAge</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span> <span class="token number">60</span> <span class="token punctuation">}</span></span>
    <span class="token attr-name">actions</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span> <span class="token punctuation">{</span>
      markCompleted<span class="token punctuation">:</span> id <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">(</span><span class="token punctuation">{</span>
        params<span class="token punctuation">:</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span><span class="token punctuation">,</span>
        invalidates<span class="token punctuation">:</span> path<span class="token punctuation">,</span>
        options<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          method<span class="token punctuation">:</span> <span class="token string">'PUT'</span><span class="token punctuation">,</span>
          body<span class="token punctuation">:</span> JSON<span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span><span class="token punctuation">{</span> completed<span class="token punctuation">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span></span>
      <span class="token attr-name">})</span>
    <span class="token attr-name">}</span> <span class="token attr-name">}</span>
    <span class="token attr-name">{</span> <span class="token attr-name">...rest</span> <span class="token attr-name">}</span>
  <span class="token punctuation">/></span></span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> TodoList <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> resource <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> <span class="token punctuation">{</span> state<span class="token punctuation">,</span> actions <span class="token punctuation">}</span> <span class="token operator">=</span> resource

  <span class="token keyword">let</span> todos <span class="token operator">=</span> state<span class="token punctuation">.</span>value <span class="token operator">||</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

  <span class="token keyword">return</span> <span class="token punctuation">(</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
      <span class="token punctuation">{</span>
        todos<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>todo <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
          <span class="token keyword">return</span> <span class="token punctuation">(</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name">key</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span> todo<span class="token punctuation">.</span>id <span class="token punctuation">}</span></span><span class="token punctuation">></span></span>
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span>
                <span class="token attr-name">onClick</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span>
                  <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
                    actions<span class="token punctuation">.</span><span class="token function">markCompleted</span><span class="token punctuation">(</span>todo<span class="token punctuation">.</span>id<span class="token punctuation">)</span>
                      <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>fetchState<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> <span class="token punctuation">{</span>
                        <span class="token function">alert</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`Todo #</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>fetchState<span class="token punctuation">.</span>value<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> - update succesful`</span></span><span class="token punctuation">)</span>
                      <span class="token punctuation">}</span></span><span class="token attr-name">)</span>
                  <span class="token attr-name">}</span>
                <span class="token attr-name">}</span>
              <span class="token punctuation">></span></span>
               Done
              <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
              <span class="token punctuation">{</span> <span class="token template-string"><span class="token string">`#</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>todo<span class="token punctuation">.</span>id<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> - </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>todo<span class="token punctuation">.</span>title<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span> <span class="token punctuation">}</span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
          <span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
  <span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">render</span><span class="token punctuation">(</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Todos</span><span class="token punctuation">></span></span>
    <span class="token punctuation">{</span> resource <span class="token operator">=</span><span class="token operator">></span> <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>TodoList</span> <span class="token attr-name">resource</span><span class="token script language-javascript"><span class="token punctuation">=</span><span class="token punctuation">{</span> resource <span class="token punctuation">}</span></span> <span class="token punctuation">/></span></span> <span class="token punctuation">}</span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>Todos</span><span class="token punctuation">></span></span>
<span class="token punctuation">)</span></pre><section style="margin:2rem 0;padding:0 1rem 1rem;border:1px solid #ddd"><div class="react-live-preview"><div></div></div></section></div></div></main><footer><div style="display:flex"><div style="flex:1;justify-content:flex-start">© 2019 Signal Sciences</div><div style="justify-content:flex-end"><a href="https://www.signalsciences.com"><img alt="Signal Sciences" width="120" src="/static/signalsciences.svg"/></a></div></div></footer></div><script>__NEXT_DATA__ = {"props":{"pageProps":{}},"page":"/demos/resource","query":{},"buildId":"HinAC7FyyY6p9tQ2syZeR","assetPrefix":"/rsrc","nextExport":true};__NEXT_LOADED_PAGES__=[];__NEXT_REGISTER_PAGE=function(r,f){__NEXT_LOADED_PAGES__.push([r, f])}</script><script async="" id="__NEXT_PAGE__/demos/resource" src="/rsrc/_next/static/HinAC7FyyY6p9tQ2syZeR/pages/demos/resource.js"></script><script async="" id="__NEXT_PAGE__/_app" src="/rsrc/_next/static/HinAC7FyyY6p9tQ2syZeR/pages/_app.js"></script><script async="" id="__NEXT_PAGE__/_error" src="/rsrc/_next/static/HinAC7FyyY6p9tQ2syZeR/pages/_error.js"></script><script src="/rsrc/_next/static/runtime/webpack-42652fa8b82c329c0559.js" async=""></script><script src="/rsrc/_next/static/chunks/commons.d32c58893f404c7c451c.js" async=""></script><script src="/rsrc/_next/static/runtime/main-b9b53f3f44c8c7c1cf78.js" async=""></script></body></html>